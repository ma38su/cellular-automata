{"version":3,"sources":["components/Cell.tsx","components/CellAutomata.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Cell","props","x","y","size","color","state","width","height","fill","stroke","CellAutomata","stateArray","map","i","initialState","type","length","states","Array","keys","Math","floor","_","random","App","initType","rule","React","useState","rules","bit","push","toStateMachine","stateMachines","cellTable","setCellTable","useEffect","id","setInterval","table","clearInterval","lastStates","newStates","stateMachine","i0","i2","nextState","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","queries","window","location","search","slice","split","reduce","o","kv","key","val","init","toInitialType","parseInt","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0NASA,SAASA,EAAKC,GAAe,IACnBC,EAAqBD,EAArBC,EAAGC,EAAkBF,EAAlBE,EAAGC,EAAeH,EAAfG,KAGRC,EAHuBJ,EAATK,MAGE,OAAS,OAE/B,OAAQ,sBAAMJ,EAAGA,EAAGC,EAAGA,EAAGI,MAAOH,EAAMI,OAAQJ,EAAMK,KAAMJ,EAAOK,OAHnD,SCHjB,SAASC,EAAaV,GAAe,IAEjCE,EAGEF,EAHFE,EACAC,EAEEH,EAFFG,KACOQ,EACLX,EADFK,MAGF,OACE,mCAEEM,EAAWC,KAAI,SAACP,EAAOQ,GACrB,OAAO,cAACd,EAAD,CAAME,EAAGY,EAAIV,EAAMD,EAAGA,EAAGC,KAAMA,EAAME,MAAOA,GAAYQ,QCKvE,SAASC,EAAaC,EAAmBC,GACvC,IAAMC,EAAS,YAAI,IAAIC,MAAMF,GAAQG,QAAQP,KAAI,SAAAC,GAAC,OAAI,KACtD,OAAQE,GACN,IAAK,OACHE,EAAO,IAAK,EACZ,MACF,IAAK,SACHA,EAAOG,KAAKC,MAAML,EAAS,KAAM,EACjC,MACF,IAAK,QACHC,EAAOA,EAAOD,OAAS,IAAK,EAC5B,MACF,IAAK,MACH,OAAOC,EAAOL,KAAI,SAAAU,GAAC,OAAI,KACzB,IAAK,SACH,OAAOL,EAAOL,KAAI,SAAAU,GAAC,OAAIF,KAAKG,SAAW,MAE3C,OAAON,EAyCMO,I,IAAAA,EAhCf,SAAaxB,GAAe,IAClByB,EAA2BzB,EAA3ByB,SAAUC,EAAiB1B,EAAjB0B,KAAMV,EAAWhB,EAAXgB,OADC,EAECW,IAAMC,SA9ClC,SAAwBF,GAEtB,IADA,IAAMG,EAAQ,GACd,kBAAoB,IAAIX,MAAM,GAAGC,QAAjC,eAA0C,CAArC,IACGW,EAAM,GADF,KAEVD,EAAME,KAAsB,KAAhBL,EAAOI,IAErB,OAAOD,EAwCkCG,CAAeN,IAAhDO,EAFiB,sBAGWN,IAAMC,SAAsB,CAACd,EAAaW,EAAUT,KAH/D,mBAGjBkB,EAHiB,KAGNC,EAHM,KAqBzB,OAhBAR,IAAMS,WAAU,WACd,IAAMC,EAAKC,aAAY,WACrBH,GAAa,SAAAI,GACPA,EAAMvB,OAtDH,KAuDLwB,cAAcH,GAGhB,IAAMI,EAAaF,EAAMA,EAAMvB,OAAS,GAClC0B,EAAY,YAAID,EAAWtB,QAAQP,KAAI,SAAAC,GAC3C,OAjDV,SAAmB8B,EAAyB1B,EAAmBJ,GAC7D,IAAM+B,EAAK/B,EAAI,EACTgC,EAAKhC,EAAI,EAIf,OAAO8B,GAHKC,GAAM,GAAK3B,EAAO2B,GAAO,EAAI,IAC9B3B,EAAOJ,GAAK,EAAI,IACfgC,EAAK5B,EAAOD,QAAUC,EAAO4B,GAAO,EAAI,IA4CrCC,CAAUb,EAAeQ,EAAY5B,MAE9C,MAAM,GAAN,mBAAW0B,GAAX,CAAkBG,SAEnB,KACH,OAAO,kBAAMF,cAAcH,MAC1B,CAACJ,IAEF,8BAEIC,EAAUtB,KAAI,SAACD,EAAYE,GACzB,OAAO,cAACH,EAAD,CAAcR,EAxEd,GAwE4BW,EAAGV,KAxE/B,GAwE+CE,MAAOM,GAAiBE,SC9DzEkC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCERQ,EAAUC,OAAOC,SAASC,OAAOC,MAAM,GAAGC,MAAM,KAAKC,QAAO,SAACC,EAAGC,GAAQ,IAAD,EACxDA,EAAGH,MAAM,KAD+C,mBACpEI,EADoE,KAC/DC,EAD+D,KAG3E,OADAH,EAAEE,GAAOC,EACFH,IACN,IAgBH,IAAMI,EAdN,SAAuB1C,GACrB,OAAQA,GACN,IAAK,QACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,MACH,OAAOA,EACT,QACE,MAAO,UAIA2C,CAAcZ,EAAO,MAC5B9B,EAAO2C,SAAQ,UAACb,EAAO,YAAR,QAAoB,MACnCxC,EAASqD,SAAQ,UAACb,EAAO,cAAR,QAAsB,OAE7Cc,QAAQC,IAAI,gBAAiB,CAAC7C,OAAMyC,OAAMnD,WAE1CwD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,CAAKjD,SAAU0C,EAAMzC,KAAMA,EAAMV,OAAQA,MAE3C2D,SAASC,eAAe,SAM1B7B,M","file":"static/js/main.aa0eb518.chunk.js","sourcesContent":["import React from 'react';\n\ntype Props = {\n  x: number;\n  y: number;\n  size: number;\n  state: boolean;\n};\n\nfunction Cell(props: Props) {\n  const { x, y, size, state} = props;\n\n  const stroke = '#222';\n  const color = state ? '#777' : '#EEE';\n\n  return (<rect x={x} y={y} width={size} height={size} fill={color} stroke={stroke} />);\n}\nexport { Cell };","import React from 'react';\nimport { Cell } from './Cell';\n\ntype Props = {\n  y: number;\n  size: number;\n  state: boolean[];\n};\n\nfunction CellAutomata(props: Props) {\n  const {\n    y,\n    size,\n    state: stateArray\n  } = props;\n\n  return (\n    <>\n    {\n      stateArray.map((state, i) => {\n        return <Cell x={i * size} y={y} size={size} state={state} key={i} />\n      })\n    }\n    </>\n  );\n}\n\nexport { CellAutomata };","import React from 'react';\nimport { CellAutomata } from './components/CellAutomata';\nimport { InitialType } from './types/InitialType';\n\nconst cellSize = 10;\nconst maxSeq = 200;\n\nfunction toStateMachine(rule: number) {\n  const rules = [];\n  for (const i of [...new Array(8).keys()]) {\n    const bit = 1 << i;\n    rules.push((rule & bit) !== 0);\n  }\n  return rules;\n}\n\nfunction nextState(stateMachine: boolean[], states: boolean[], i: number): boolean {\n  const i0 = i - 1;\n  const i2 = i + 1;\n  const b0 = (i0 >= 0 && states[i0]) ? 4 : 0;\n  const b1 = states[i] ? 2 : 0;\n  const b2 = (i2 < states.length && states[i2]) ? 1 : 0;\n  return stateMachine[b0 | b1 | b2];\n}\n\nfunction initialState(type: InitialType, length: number) {\n  const states = [...new Array(length).keys()].map(i => false);\n  switch (type) {\n    case 'left':\n      states[0] = true;\n      break;\n    case 'center':\n      states[Math.floor(length / 2)] = true;\n      break;\n    case 'right':\n      states[states.length - 1] = true;\n      break;\n    case 'all':\n      return states.map(_ => true);\n    case 'random':\n      return states.map(_ => Math.random() > 0.5 ? true : false);\n  }\n  return states;\n}\n\ntype Props = {\n  initType: InitialType,\n  rule: number;\n  length: number;\n}\n\nfunction App(props: Props) {\n  const { initType, rule, length } = props;\n  const [ stateMachines ] = React.useState(toStateMachine(rule));\n  const [ cellTable, setCellTable ] = React.useState<boolean[][]>([initialState(initType, length)]);\n\n  React.useEffect(() => {\n    const id = setInterval(() => {\n      setCellTable(table => {\n        if (table.length > maxSeq) {\n          clearInterval(id);\n        }\n\n        const lastStates = table[table.length - 1];\n        const newStates = [...lastStates.keys()].map(i => {\n          return nextState(stateMachines, lastStates, i);\n        });\n        return [...table, newStates];\n      });\n    }, 500);\n    return () => clearInterval(id);\n  }, [stateMachines]);\n  return (\n    <svg>\n      {\n        cellTable.map((stateArray, i) => {\n          return <CellAutomata y={cellSize * i} size={cellSize} state={stateArray} key={i} />;\n        })\n      }\n    </svg>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { InitialType } from './types/InitialType';\n\ntype Query = {\n  [key: string] : string;\n};\n\nconst queries = window.location.search.slice(1).split('&').reduce((o, kv) => {\n  const [key, val] = kv.split('=');\n  o[key] = val;\n  return o;\n}, {} as Query);\n\nfunction toInitialType(initType?: string): InitialType {\n  switch (initType) {\n    case 'blank':\n    case 'left':\n    case 'center':\n    case 'right':\n    case 'random':\n    case 'all':\n      return initType;\n    default:\n      return 'center';\n  }\n}\n\nconst init = toInitialType(queries['init']);\nconst rule = parseInt(queries['rule'] ?? '90');\nconst length = parseInt(queries['length'] ?? '200');\n\nconsole.log(\"cell-automata\", {rule, init, length});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App initType={init} rule={rule} length={length}/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}